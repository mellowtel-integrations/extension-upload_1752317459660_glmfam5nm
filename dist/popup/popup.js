document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("scan-orders"),t=document.getElementById("download-invoices"),n=document.getElementById("settings-button"),d=document.getElementById("detected-orders"),o=document.getElementById("downloaded-invoices"),s=document.getElementById("status-display");function c(n,d=!1){s.textContent=n,e.disabled=d,t.disabled=d,s.classList.toggle("text-blue-500",d),s.classList.toggle("text-green-500",!d&&n.includes("Complete"))}chrome.storage.local.get(["detectedOrders","downloadedInvoices"],e=>{d.textContent=e.detectedOrders||0,o.textContent=e.downloadedInvoices||0}),e.addEventListener("click",()=>{c("Scanning orders...",!0),chrome.tabs.query({active:!0,currentWindow:!0},e=>{chrome.tabs.sendMessage(e[0].id,{action:"scanOrders"})})}),t.addEventListener("click",()=>{c("Downloading invoices...",!0),chrome.runtime.sendMessage({action:"downloadInvoices"})}),n.addEventListener("click",()=>{chrome.runtime.openOptionsPage()}),chrome.runtime.onMessage.addListener((e,t,n)=>{"updateCounts"===e.action?(d.textContent=e.detectedOrders||0,void 0!==e.downloadedInvoices&&(o.textContent=e.downloadedInvoices)):"updateStatus"===e.action&&c(e.text,e.inProgress)})});