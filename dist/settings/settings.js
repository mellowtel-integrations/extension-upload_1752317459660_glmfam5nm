document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("save-settings"),t=document.getElementById("webhook-url"),s=document.getElementById("smtp-host"),o=document.getElementById("smtp-port"),n=document.getElementById("smtp-user"),m=document.getElementById("smtp-pass"),l=document.getElementById("smtp-recipient");chrome.storage.sync.get(["webhookUrl","smtpConfig"],e=>{e.webhookUrl&&(t.value=e.webhookUrl),e.smtpConfig&&(s.value=e.smtpConfig.host||"",o.value=e.smtpConfig.port||"",n.value=e.smtpConfig.user||"",m.value=e.smtpConfig.pass||"",l.value=e.smtpConfig.recipient||"")}),e.addEventListener("click",()=>{const e=t.value.trim(),a={host:s.value.trim(),port:parseInt(o.value,10),user:n.value.trim(),pass:m.value,recipient:l.value.trim()};chrome.storage.sync.set({webhookUrl:e,smtpConfig:a},()=>{console.log("Settings saved."),alert("Settings have been saved successfully!"),window.close()})})});